<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Pregnancy Calculator ‚Äì Due Date, Baby Size & Timeline</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --primary:#2563eb;
  --bg:#f4f7fb;
  --card:#ffffff;
  --radius:16px;
  --text:#1f2937;
  --muted:#6b7280;

  --first:#e0f2fe;
  --second:#ecfeff;
  --third:#f0fdf4;
  --today:#fde68a;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:Inter,system-ui,Arial;
  background:var(--bg);
  color:var(--text);
}

.container{max-width:1200px;margin:auto;padding:20px}

.card{
  background:var(--card);
  border-radius:var(--radius);
  padding:28px;
  box-shadow:0 14px 36px rgba(0,0,0,.08);
}

h1{margin:0;color:var(--primary)}
small{color:var(--muted)}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:16px;
}

input,select{
  width:100%;
  padding:14px;
  font-size:16px;
  border-radius:10px;
  border:1px solid #ddd;
  background:#fff;
  color:#111;
}

/* DATE PICKER TEXT FIX */
input[type="date"]{
  color:#111;
  -webkit-text-fill-color:#111;
}
input[type="date"]::-webkit-datetime-edit{color:#111}
input[type="date"]::-webkit-calendar-picker-indicator{opacity:1}

button{
  width:100%;
  padding:18px;
  background:var(--primary);
  color:#fff;
  border:none;
  border-radius:14px;
  font-size:18px;
  cursor:pointer;
}

.print-btn{
  margin-top:16px;
  background:#0f172a;
}

.error{color:#dc2626;font-weight:600;margin-top:10px}

table{
  width:100%;
  border-collapse:collapse;
  font-size:14px;
}

th,td{
  padding:10px;
  border-bottom:1px solid #eee;
  text-align:center;
}

th:first-child,td:first-child,
th:nth-child(2),td:nth-child(2){
  text-align:left;
}

thead th{
  background:#f8fafc;
}

.first{background:var(--first)}
.second{background:var(--second)}
.third{background:var(--third)}
.today{background:var(--today)}

.insight{
  margin-top:16px;
  padding:16px;
  border-radius:12px;
  background:#f1f5f9;
  font-size:14px;
  line-height:1.6;
}

/* üì± MOBILE ‚Üí VERTICAL TABLE */
@media (max-width:768px){
  table,thead,tbody,th,td,tr{display:block}
  thead{display:none}
  tr{
    margin-bottom:16px;
    border-radius:12px;
    overflow:hidden;
  }
  td{
    display:flex;
    justify-content:space-between;
    text-align:right;
    padding:10px 14px;
  }
  td::before{
    content:attr(data-label);
    font-weight:600;
    text-align:left;
  }
}

/* üñ®Ô∏è PRINT */
@media print{
  body{background:#fff}
  button,.grid,.error{display:none}
  .card{box-shadow:none;border:1px solid #ccc}
}
</style>
</head>

<body>
<div class="container">

<!-- INPUT -->
<div class="card">
<h1>Pregnancy Calculator</h1>
<small>Due date ¬∑ Weeks & days ¬∑ Baby size ¬∑ Weight gain ¬∑ Timeline</small>
<br><br>

<div class="grid">
  <select id="method">
    <option value="due">Known Due Date</option>
    <option value="lmp">Last Menstrual Period (LMP)</option>
    <option value="conception">Conception Date</option>
    <option value="ultrasound">Ultrasound Dating</option>
    <option value="ivf">IVF Transfer Date</option>
  </select>

  <input id="dateInput" type="date">

  <select id="extra" style="display:none">
    <option value="5">5-day embryo</option>
    <option value="3">3-day embryo</option>
  </select>
</div>

<br>
<button onclick="calculate()">Calculate Pregnancy</button>
<div id="error" class="error"></div>
</div>

<br>

<!-- SUMMARY -->
<div class="card">
<div id="summary">Result = ‚Äî</div>
<div id="insight" class="insight"></div>
<button class="print-btn" onclick="window.print()">Print Pregnancy Report</button>
</div>

<br>

<!-- TIMELINE -->
<div class="card">
<h2>Pregnancy Week-by-Week Timeline</h2>
<table>
<thead>
<tr>
<th>Week</th>
<th>Date Range</th>
<th>Trimester</th>
<th>Baby Size</th>
<th>Important Milestones</th>
</tr>
</thead>
<tbody id="timeline"></tbody>
</table>
</div>

</div>

<script>
const MS=86400000;

const babySize=[null,
["0.1 in","<1 g"],["0.1 in","<1 g"],["0.2 in","<1 g"],
["0.3 in","1 g"],["0.5 in","2 g"],["0.6 in","4 g"],
["0.9 in","7 g"],["1.2 in","14 g"],["1.6 in","25 g"],
["2.1 in","45 g"],["2.9 in","60 g"],["3.4 in","90 g"],
["4.6 in","120 g"],["5.1 in","170 g"],["6.0 in","200 g"],
["6.7 in","250 g"],["7.4 in","300 g"],["8.7 in","350 g"],
["10.1 in","400 g"],["10.5 in","500 g"],["11.2 in","600 g"],
["11.8 in","700 g"],["12.2 in","800 g"],["13.4 in","900 g"],
["13.6 in","1 kg"],["14.0 in","1.1 kg"],["14.8 in","1.3 kg"],
["15.2 in","1.5 kg"],["15.7 in","1.7 kg"],["16.5 in","1.9 kg"],
["17.2 in","2.1 kg"],["17.7 in","2.4 kg"],["18.2 in","2.6 kg"],
["18.7 in","2.9 kg"],["19.2 in","3.1 kg"],["19.7 in","3.3 kg"],
["20.2 in","3.4 kg"],["20.7 in","3.5 kg"],["21.0 in","3.6 kg"]
];

const milestones={
3:"Baby conceived",
4:"Pregnancy test positive",
6:"Heartbeat detectable by ultrasound",
13:"Miscarriage risk decreases",
18:"Baby movements felt",
23:"Premature baby may survive",
28:"Baby can breathe",
40:"Full term"
};

method.onchange=()=>extra.style.display=method.value==="ivf"?"block":"none";

function addDays(d,n){const x=new Date(d);x.setDate(x.getDate()+n);return x;}
function fmt(d){return d.toLocaleDateString(undefined,{month:"short",day:"numeric",year:"numeric"});}

function calculate(){
error.textContent="";
timeline.innerHTML="";
if(!dateInput.value){error.textContent="Please select a date.";return;}

const base=new Date(dateInput.value+"T00:00");
let lmp;

if(method.value==="due") lmp=addDays(base,-280);
if(method.value==="lmp") lmp=base;
if(method.value==="conception") lmp=addDays(base,-14);
if(method.value==="ultrasound") lmp=addDays(base,-70);
if(method.value==="ivf") lmp=addDays(base,-(extra.value==="5"?261:263));

const today=new Date();
if(today<lmp){error.textContent="Pregnancy has not started yet.";return;}

const days=Math.min(Math.floor((today-lmp)/MS),294);
const weeks=Math.max(1,Math.floor(days/7));
const rem=days%7;
const due=addDays(lmp,280);
const progress=Math.min((days/280)*100,100).toFixed(0);
const trimester=weeks<=13?"First":weeks<=27?"Second":"Third";
const size=babySize[weeks]||["‚Äî","‚Äî"];

summary.innerHTML=`
<p><b>Week ${weeks}</b> (${weeks} weeks ${rem} days)</p>
<p>Trimester: <b>${trimester}</b></p>
<p>Estimated due date: <b>${fmt(due)}</b></p>
<p>Pregnancy progress: <b>${progress}%</b></p>
<p>Baby size: <b>${size[0]}</b>, weight <b>${size[1]}</b></p>
`;

insight.innerHTML=`
<strong>Recommended weight gain (singleton pregnancy):</strong><br>
Underweight: 12.5‚Äì18 kg ¬∑ Normal: 11.5‚Äì16 kg ¬∑ Overweight: 7‚Äì11.5 kg ¬∑ Obese: 5‚Äì9 kg
<br><br>
<strong>Medical disclaimer:</strong> Results are estimates. Ultrasound dating by a healthcare professional is the most accurate.
`;

for(let w=1;w<=42;w++){
const s=addDays(lmp,(w-1)*7),e=addDays(s,6);
const tr=w<=13?"First":w<=27?"Second":"Third";
const cls=(w===weeks?"today ":"")+(tr==="First"?"first":tr==="Second"?"second":"third");

timeline.innerHTML+=`
<tr class="${cls}">
<td data-label="Week">Week ${w}</td>
<td data-label="Date Range">${fmt(s)} ‚Äì ${fmt(e)}</td>
<td data-label="Trimester">${tr}</td>
<td data-label="Baby Size">${babySize[w]?babySize[w].join(", "):"‚Äî"}</td>
<td data-label="Milestones">${milestones[w]||""}</td>
</tr>`;
}
}
</script>

</body>
</html>
