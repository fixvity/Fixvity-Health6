<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Pregnancy Calculator – Due Date, Weeks & Timeline</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --primary:#2563eb;
  --bg:#f4f7fb;
  --card:#ffffff;
  --radius:16px;
  --text:#1f2937;
  --muted:#6b7280;
  --highlight:#e0f2fe;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,system-ui,Arial;
  background:var(--bg);
  color:var(--text);
}
.container{max-width:1200px;margin:auto;padding:20px}
.card{
  background:var(--card);
  border-radius:var(--radius);
  padding:28px;
  box-shadow:0 14px 36px rgba(0,0,0,.08);
}
h1{margin:0;color:var(--primary)}
small{color:var(--muted)}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
  gap:20px;
}

input,select{
  width:100%;
  padding:14px;
  font-size:16px;
  border-radius:10px;
  border:1px solid #ddd;
}

button{
  width:100%;
  padding:18px;
  background:var(--primary);
  color:#fff;
  border:none;
  border-radius:14px;
  font-size:18px;
  cursor:pointer;
}

.error{
  color:#dc2626;
  font-weight:600;
  margin-top:10px;
}

table{
  width:100%;
  border-collapse:collapse;
  font-size:14px;
}
th,td{
  padding:10px;
  border-bottom:1px solid #eee;
  text-align:left;
}
th{background:#f8fafc}
.today{background:var(--highlight)}

.insight{
  margin-top:18px;
  padding:16px;
  border-radius:12px;
  background:#f1f5f9;
  font-size:14px;
  line-height:1.6;
}
</style>
</head>

<body>
<div class="container">

<!-- INPUT -->
<div class="card">
<h1>Pregnancy Calculator</h1>
<small>Due date · Weeks & days · Trimesters · Timeline</small>
<br><br>

<div class="grid">
  <select id="method">
    <option value="lmp">Last Menstrual Period (LMP)</option>
    <option value="due">Known Due Date</option>
  </select>
  <input id="dateInput" type="date">
</div>

<br>
<button onclick="calculate()">Calculate Pregnancy</button>
<div id="error" class="error"></div>
</div>

<br>

<!-- SUMMARY -->
<div class="card">
<div id="summary">Result = —</div>
<div id="insight" class="insight"></div>
</div>

<br>

<!-- TIMELINE -->
<div class="card">
<h2>Pregnancy Week-by-Week Timeline</h2>
<div style="overflow-x:auto">
<table id="timeline">
<thead>
<tr>
<th>Week</th>
<th>Date Range</th>
<th>Trimester</th>
<th>Important Milestones</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
</div>

</div>

<script>
function addDays(d,days){
  const x=new Date(d);
  x.setDate(x.getDate()+days);
  return x;
}
function format(d){
  return d.toLocaleDateString(undefined,{year:"numeric",month:"short",day:"numeric"});
}

function calculate(){
  error.innerText="";
  summary.innerHTML="";
  insight.innerHTML="";
  timeline.querySelector("tbody").innerHTML="";

  if(!dateInput.value){
    error.innerText="Please select a valid date.";
    return;
  }

  const input=new Date(dateInput.value);
  const today=new Date();
  let lmp, due;

  if(method.value==="lmp"){
    lmp=input;
    due=addDays(lmp,280);
  }else{
    due=input;
    lmp=addDays(due,-280);
  }

  if(today < lmp){
    error.innerText="The selected date indicates pregnancy has not started yet.";
    return;
  }

  const totalDays=Math.floor((today-lmp)/(1000*60*60*24));
  const cappedDays=Math.min(totalDays,294); // up to 42 weeks
  const weeks=Math.floor(cappedDays/7);
  const days=cappedDays%7;

  const months=Math.floor(cappedDays/30);
  const remDays=cappedDays%30;

  let trimester;
  if(weeks<=13) trimester="First";
  else if(weeks<=27) trimester="Second";
  else trimester="Third";

  const progress=Math.min((cappedDays/280)*100,100).toFixed(0);
  const conception=addDays(lmp,14);

  summary.innerHTML=`
    <p><b>You are currently at week ${weeks}</b> (${weeks} weeks ${days} days or ${months} months ${remDays} days).</p>
    <p>You are in the <b>${trimester} trimester</b>.</p>
    <p>Your baby was likely conceived around <b>${format(conception)}</b>.</p>
    <p>Estimated due date: <b>${format(due)}</b></p>
    <p>Pregnancy progress: <b>${progress}%</b></p>
  `;

  insight.innerHTML=`
    <strong>Medical disclaimer:</strong><br>
    This calculator is based on a standard 28-day cycle and single pregnancy.
    Results may differ for twins, IVF pregnancies, or irregular cycles.
    Ultrasound dating by a healthcare professional is the most accurate.
  `;

  const milestones={
    3:"Baby conceived",
    4:"Pregnancy test positive",
    6:"Heartbeat detectable by ultrasound",
    13:"Miscarriage risk decreases",
    18:"Baby movements felt",
    23:"Premature baby may survive",
    28:"Baby can breathe",
    40:"Full term"
  };

  for(let w=1;w<=42;w++){
    const start=addDays(lmp,(w-1)*7);
    const end=addDays(start,6);
    const tri=w<=13?"First trimester":w<=27?"Second trimester":"Third trimester";
    const note=milestones[w]||"";

    const tr=document.createElement("tr");
    if(w===weeks) tr.className="today";

    tr.innerHTML=`
      <td>Week ${w}</td>
      <td>${format(start)} – ${format(end)}</td>
      <td>${tri}</td>
      <td>${note}</td>
    `;
    timeline.querySelector("tbody").appendChild(tr);
  }
}

const method=document.getElementById("method");
const dateInput=document.getElementById("dateInput");
const error=document.getElementById("error");
const summary=document.getElementById("summary");
const insight=document.getElementById("insight");
const timeline=document.getElementById("timeline");
</script>

</body>
</html>
